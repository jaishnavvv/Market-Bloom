<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Seller Dashboard - Market Bloom</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background-color: #f0fff0; }
    header { background-color: #2d6a4f; color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; }
    header img { height: 40px; }
    header h1 { margin: 0; font-size: 22px; }
    .container { padding: 20px; max-width: 900px; margin: auto; }
    input, button { padding: 8px; margin: 5px 0; border-radius: 5px; border: 1px solid #ccc; font-size: 14px; }
    button { background-color: #2d6a4f; color: white; cursor: pointer; border: none; }
    button:hover { background-color: #25603d; }
    h2 { color: #2d6a4f; }
    .product-list { margin-top: 20px; }
    .product-item { background: white; padding: 10px; margin-bottom: 10px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .product-item button { background-color: #e63946; margin-left: 10px; }
    .logout-btn { background-color: #e63946; margin-top: 10px; }
    #sellerForm { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    label { display: block; margin-top: 10px; }
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="Market Bloom Logo">
    <h1>Seller Dashboard</h1>
  </header>

  <div class="container">

    <!-- Signup/Login Form -->
    <div id="sellerForm">
      <h2 id="formTitle">Seller Sign Up / Login</h2>
      <label>Shop Name</label>
      <input type="text" id="shopName" placeholder="Your shop name">
      <label>Location</label>
      <input type="text" id="location" placeholder="Shop location">
      <label>Email</label>
      <input type="email" id="email" placeholder="Email">
      <label>Password</label>
      <input type="password" id="password" placeholder="Password">
      <label>Confirm Password</label>
      <input type="password" id="confirmPassword" placeholder="Confirm Password">
      <button onclick="signupSeller()">Sign Up</button>
      <button onclick="loginSeller()">Login</button>
    </div>

    <!-- Seller Dashboard -->
    <div id="dashboard" style="display:none;">
      <h2>Welcome, <span id="sellerName"></span></h2>
      <button class="logout-btn" onclick="logoutSeller()">Logout</button>

      <h3>Update Shop Info</h3>
      <label>Shop Name</label>
      <input type="text" id="editShopName">
      <label>Location</label>
      <input type="text" id="editLocation">
      <button onclick="updateShopInfo()">Update Info</button>

      <h3>Products</h3>
      <label>Product Name</label>
      <input type="text" id="productName">
      <label>Type (Flower/Fruit)</label>
      <input type="text" id="productType">
      <label>Price</label>
      <input type="number" id="productPrice">
      <button onclick="addProduct()">Add Product</button>

      <div class="product-list" id="productList"></div>
    </div>

  </div>

  <script>
    // --- Signup ---
    function signupSeller() {
      const shopName = document.getElementById('shopName').value.trim();
      const location = document.getElementById('location').value.trim();
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value;
      const confirmPassword = document.getElementById('confirmPassword').value;

      if (!shopName || !location || !email || !password || !confirmPassword) {
        alert("Please fill all fields.");
        return;
      }

      if (password !== confirmPassword) {
        alert("Passwords do not match!");
        return;
      }

      const sellerData = { shopName, location, email, password, products: [] };
      localStorage.setItem("seller", JSON.stringify(sellerData));
      loadDashboard();
    }

    // --- Login ---
    function loginSeller() {
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value;

      const seller = JSON.parse(localStorage.getItem("seller"));
      if (seller && seller.email === email && seller.password === password) {
        loadDashboard();
      } else {
        alert("Invalid email or password!");
      }
    }

    // --- Load Dashboard ---
    function loadDashboard() {
      const seller = JSON.parse(localStorage.getItem("seller"));
      if (!seller) return;

      document.getElementById('sellerForm').style.display = "none";
      document.getElementById('dashboard').style.display = "block";
      document.getElementById('sellerName').innerText = seller.shopName;
      document.getElementById('editShopName').value = seller.shopName;
      document.getElementById('editLocation').value = seller.location;

      renderProducts();
    }

    // --- Logout ---
    function logoutSeller() {
      localStorage.removeItem("seller");
      location.reload();
    }

    // --- Update Shop Info ---
    function updateShopInfo() {
      const seller = JSON.parse(localStorage.getItem("seller"));
      seller.shopName = document.getElementById('editShopName').value.trim();
      seller.location = document.getElementById('editLocation').value.trim();
      localStorage.setItem("seller", JSON.stringify(seller));
      document.getElementById('sellerName').innerText = seller.shopName;
      alert("Shop info updated!");
    }

    // --- Products ---
    function addProduct() {
      const seller = JSON.parse(localStorage.getItem("seller"));
      const name = document.getElementById('productName').value.trim();
      const type = document.getElementById('productType').value.trim();
      const price = parseFloat(document.getElementById('productPrice').value);

      if (!name || !type || !price) { alert("Fill all product fields"); return; }

      seller.products.push({ name, type, price });
      localStorage.setItem("seller", JSON.stringify(seller));
      renderProducts();

      // Clear inputs
      document.getElementById('productName').value = "";
      document.getElementById('productType').value = "";
      document.getElementById('productPrice').value = "";
    }

    function renderProducts() {
      const seller = JSON.parse(localStorage.getItem("seller"));
      const productList = document.getElementById('productList');
      productList.innerHTML = "";
      seller.products.forEach((p, idx) => {
        const div = document.createElement('div');
        div.className = "product-item";
        div.innerHTML = `${p.type} - ${p.name} - â‚¹${p.price} <button onclick="deleteProduct(${idx})">Delete</button>`;
        productList.appendChild(div);
      });
    }

    function deleteProduct(idx) {
      const seller = JSON.parse(localStorage.getItem("seller"));
      seller.products.splice(idx, 1);
      localStorage.setItem("seller", JSON.stringify(seller));
      renderProducts();
    }

    // --- Auto-load if seller already logged in ---
    window.onload = loadDashboard;
  </script>
</body>
</html>
